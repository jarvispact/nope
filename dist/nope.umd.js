(function(i,m){typeof exports=="object"&&typeof module<"u"?m(exports):typeof define=="function"&&define.amd?define(["exports"],m):(i=typeof globalThis<"u"?globalThis:i||self,m(i.Nope={}))})(this,function(i){"use strict";const m=e=>Object.keys(e),f=e=>typeof e=="object"&&!Array.isArray(e)&&e!==null&&!(e instanceof Date),R={maxArrayDisplayProperties:3,maxObjectDisplayProperties:3},u=(e,a)=>{const t={...R,...a};switch(typeof e){case"string":return`'${e}'`;case"number":case"boolean":return e.toString();case"object":{if(e===null)return"null";if(e instanceof Date)return"Date";if(Array.isArray(e)){const d=Math.max(0,e.length-t.maxArrayDisplayProperties),x=e.slice(0,t.maxArrayDisplayProperties).map(ee=>u(ee,t)).join(", ");return e.length>0?`[ ${x}${d>0?`, + ${d} more`:""} ]`:"[]"}const r=Object.keys(e),n=Math.max(0,r.length-t.maxObjectDisplayProperties),s=r.slice(0,t.maxObjectDisplayProperties).map(d=>`${d}: ${u(e[d],t)}`).join(", ");return r.length>0?`{ ${s}${n>0?`, + ${n} more`:""} }`:"{}"}case"undefined":return"undefined";default:return"unknown"}},E=e=>({status:"ERR",value:e}),b=e=>({status:"OK",value:e}),O=e=>e.status==="ERR",g=e=>e.status==="OK",L=e=>{if(O(e))throw new Error("Cannot not unwrap either");return e.value},v=(e,{onOk:a,onErr:t})=>g(e)?a(e.value):t(e.value),K=(e,{onOk:a,onErr:t})=>({eitherObject:e,onOk:a,onErr:t}),c=({code:e,message:a,details:t})=>(r,n)=>({code:e,message:a||`input: ${u(r)}, does not match the type of: '${n.displayString}'`,details:t?{...n,...t}:n}),l=e=>e,h=e=>a=>({is:t=>e.is(t)&&a.is(t),err:(t,r)=>e.is(t)?a.err(t,r):e.err(t,r)}),k=(e,a)=>o({uri:e.uri,create:e.create,validation:l({is:t=>e.is(t)&&a.every(r=>r.is(t)),err:(t,r)=>{if(!e.is(t))return e.err(t,r);const n=a.find(s=>!s.is(t));return n==null?void 0:n.err(t,r)}})}),o=({uri:e,displayString:a=e,create:t,validation:r})=>{const n=s=>r.is(s)?b(t(s)):E(r.err(s,{uri:e,displayString:a}));return{uri:e,displayString:a,is:r.is,create:t,err:r.err,validate:n}},j=e=>l({is:a=>Array.isArray(a)&&a.every(e.is),err:c({code:"E_ARRAY"})}),w=e=>o({uri:"ArraySchema",displayString:`ArraySchema( ${e.displayString} )`,create:a=>a,validation:j(e)}),A=l({is:e=>e instanceof Date&&e.toString()!=="Invalid Date",err:c({code:"E_DATE"})}),C=o({uri:"DateSchema",create:e=>e,validation:A}),S=l({is:e=>typeof e=="string",err:c({code:"E_STRING"})}),M=o({uri:"StringSchema",create:e=>String(e),validation:S}),B=/^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/i,D=h(S)({is:e=>B.test(e),err:c({code:"E_EMAIL"})}),J=o({uri:"EmailSchema",create:e=>e,validation:D}),y=l({is:e=>typeof e=="number"&&!Number.isNaN(e),err:c({code:"E_NUMBER"})}),Y=o({uri:"NumberSchema",create:e=>Number(e),validation:y}),I=h(y)({is:e=>Number.isInteger(e),err:c({code:"E_INT"})}),F=o({uri:"IntSchema",create:e=>e,validation:I}),V=e=>l({is:a=>a===e,err:c({code:"E_LITERAL",details:{literal:e}})}),G=e=>o({uri:"LiteralSchema",displayString:`LiteralSchema(${u(e)})`,create:a=>a,validation:V(e)}),q=e=>{const t=Object.keys(e),r=Math.max(0,t.length-3),n=t.map(s=>`${s}: ${e[s].uri}`).slice(0,3).join(", ");return t.length>0?`ObjectSchema({ ${n}${r>0?`, + ${r} more`:""} })`:"ObjectSchema({})"},U=(e,a)=>{const t=Object.keys(a);return Object.keys(e).every(r=>t.includes(r))},$=(e,a)=>Object.keys(e)<Object.keys(a),z={failOnAdditionalProperties:!0},_=(e,a)=>{const t={...z,...a};return l({is:r=>!f(r)||!U(e,r)||t.failOnAdditionalProperties&&$(e,r)?!1:Object.keys(e).every(n=>e[n].is(r[n])),err:(r,n)=>f(r)?U(e,r)?t.failOnAdditionalProperties&&$(e,r)?c({code:"E_OBJECT_ADDITIONAL_KEYS"})(r,n):c({code:"E_OBJECT_PROPERTY",details:{properties:m(e).reduce((s,d)=>(s[d]=e[d].validate(r[d]),s),{})}})(r,n):c({code:"E_OBJECT_MISSING_KEYS"})(r,n):c({code:"E_OBJECT"})(r,n)})},H=(e,a)=>o({uri:"ObjectSchema",displayString:q(e),create:t=>t,validation:_(e,a)}),N=h(y)({is:e=>Number.isInteger(e)&&e>=0,err:c({code:"E_UINT"})}),Q=o({uri:"UIntSchema",create:e=>e,validation:N}),W=e=>`UnionSchema( ${e.map(a=>a.displayString).join(" | ")} )`,P=e=>l({is:a=>e.some(t=>t.is(a)),err:c({code:"E_UNION"})}),X=e=>{if(e.length<=1)throw new Error("a UnionSchemas list argument must have a length of at least 2");return o({uri:"UnionSchema",displayString:W(e),create:a=>a,validation:P(e)})},Z=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,T=h(S)({is:e=>Z.test(e),err:c({code:"E_UUID"})}),p=o({uri:"UuidSchema",create:e=>e,validation:T});i.ArraySchema=w,i.ArrayValidation=j,i.DateSchema=C,i.DateValidation=A,i.EmailSchema=J,i.EmailValidation=D,i.IntSchema=F,i.IntValidation=I,i.LiteralSchema=G,i.LiteralValidation=V,i.NumberSchema=Y,i.NumberValidation=y,i.ObjectSchema=H,i.ObjectValidation=_,i.StringSchema=M,i.StringValidation=S,i.UIntSchema=Q,i.UIntValidation=N,i.UnionSchema=X,i.UnionValidation=P,i.UuidSchema=p,i.UuidValidation=T,i.createError=c,i.err=E,i.extendValidation=h,i.inputToDisplayString=u,i.isErr=O,i.isObject=f,i.isOk=g,i.matchEither=v,i.matchObjectProperties=K,i.objectKeys=m,i.ok=b,i.schema=o,i.unwrapEither=L,i.validation=l,i.withValidations=k,Object.defineProperties(i,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
