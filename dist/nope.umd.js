(function(i,h){typeof exports=="object"&&typeof module<"u"?h(exports):typeof define=="function"&&define.amd?define(["exports"],h):(i=typeof globalThis<"u"?globalThis:i||self,h(i.Nope={}))})(this,function(i){"use strict";const h=e=>Object.keys(e),E=e=>typeof e=="object"&&!Array.isArray(e)&&e!==null&&!(e instanceof Date),K={maxArrayDisplayProperties:3,maxObjectDisplayProperties:3},y=(e,a)=>{const t={...K,...a};switch(typeof e){case"string":return`'${e}'`;case"number":case"boolean":return e.toString();case"object":{if(e===null)return"null";if(e instanceof Date)return"Date";if(Array.isArray(e)){const m=Math.max(0,e.length-t.maxArrayDisplayProperties),be=e.slice(0,t.maxArrayDisplayProperties).map(Ve=>y(Ve,t)).join(", ");return e.length>0?`[ ${be}${m>0?`, + ${m} more`:""} ]`:"[]"}const r=Object.keys(e),o=Math.max(0,r.length-t.maxObjectDisplayProperties),S=r.slice(0,t.maxObjectDisplayProperties).map(m=>`${m}: ${y(e[m],t)}`).join(", ");return r.length>0?`{ ${S}${o>0?`, + ${o} more`:""} }`:"{}"}case"undefined":return"undefined";default:return"unknown"}},T=e=>({status:"ERR",value:e}),D=e=>({status:"OK",value:e}),N=e=>e.status==="ERR",O=e=>e.status==="OK",k=e=>{if(N(e))throw new Error("Cannot not unwrap either");return e.value},H=(e,{onOk:a,onErr:t})=>O(e)?a(e.value):t(e.value),Y=(e,{onOk:a,onErr:t})=>({eitherObject:e,onOk:a,onErr:t}),n=({code:e,message:a,details:t})=>(r,o)=>({code:e,message:a||`input: ${y(r)}, does not match the type of: '${o.displayString}'`,details:t?{...o,...t}:o}),d=e=>e,s=e=>a=>({is:t=>e.is(t)&&a.is(t),err:(t,r)=>e.is(t)?a.err(t,r):e.err(t,r)}),J=(e,a)=>c({uri:e.uri,create:e.create,validation:d({is:t=>e.is(t)&&a.every(r=>r.is(t)),err:(t,r)=>{if(!e.is(t))return e.err(t,r);const o=a.find(S=>!S.is(t));return o==null?void 0:o.err(t,r)}})}),c=({uri:e,displayString:a=e,create:t,validation:r})=>{const o=S=>r.is(S)?D(t(S)):T(r.err(S,{uri:e,displayString:a}));return{uri:e,displayString:a,is:r.is,create:t,err:r.err,validate:o}},g=e=>d({is:a=>Array.isArray(a)&&a.every(e.is),err:(a,t)=>Array.isArray(a)?n({code:"E_ARRAY_ITEM",details:{items:a.map(e.validate)}})(a,t):n({code:"E_ARRAY"})(a,t)}),Z=e=>c({uri:"ArraySchema",displayString:`ArraySchema( ${e.displayString} )`,create:a=>a,validation:g(e)}),A=d({is:e=>typeof e=="boolean",err:n({code:"E_BOOLEAN"})}),F=c({uri:"BooleanSchema",create:e=>e,validation:A}),b=d({is:e=>e instanceof Date&&e.toString()!=="Invalid Date",err:n({code:"E_DATE"})}),X=c({uri:"DateSchema",create:e=>e,validation:b}),l=d({is:e=>typeof e=="string",err:n({code:"E_STRING"})}),q=c({uri:"StringSchema",create:e=>String(e),validation:l}),z=/^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/i,V=s(l)({is:e=>z.test(e),err:n({code:"E_EMAIL"})}),Q=c({uri:"EmailSchema",create:e=>e,validation:V}),u=d({is:e=>typeof e=="number"&&!Number.isNaN(e),err:n({code:"E_NUMBER"})}),p=c({uri:"NumberSchema",create:e=>Number(e),validation:u}),R=s(u)({is:e=>Number.isInteger(e),err:n({code:"E_INT"})}),x=c({uri:"IntSchema",create:e=>e,validation:R}),ee=/^\d{4}-\d{2}-\d{2}$/,_=s(l)({is:e=>ee.test(e)&&new Date(e).toString()!=="Invalid Date",err:n({code:"E_ISO_8601_DATE"})}),ae=c({uri:"Iso8601DateSchema",create:e=>e,validation:_}),ie=/^\d{2}:\d{2}($|:\d{2}$|:\d{2}.\d{3}$)$/,f=s(l)({is:e=>ie.test(e)&&new Date(`2000-01-01T${e}Z`).toString()!=="Invalid Date",err:n({code:"E_ISO_8601_TIME"})}),te=c({uri:"Iso8601TimeSchema",create:e=>e,validation:f}),$=s(l)({is:e=>{const[a,t]=e.split("T");if(!a||!t)return!1;if(t.endsWith("Z")){const[r]=t.split("Z");return _.is(a)&&f.is(r)}return _.is(a)&&f.is(t)},err:n({code:"E_ISO_8601_DATE_TIME"})}),re=c({uri:"Iso8601DateTimeSchema",create:e=>e,validation:$}),j=e=>d({is:a=>a===e,err:n({code:"E_LITERAL",details:{literal:e}})}),ne=e=>c({uri:"LiteralSchema",displayString:`LiteralSchema(${y(e)})`,create:a=>a,validation:j(e)}),U=d({is:e=>e===null,err:n({code:"E_NULL"})}),oe=c({uri:"NullSchema",create:e=>e,validation:U}),ce=e=>s(u)({is:a=>a>=e,err:n({code:`E_NUMBER_MIN_LENGTH_${e}`,details:{minLength:e}})}),se=e=>s(u)({is:a=>a<=e,err:n({code:`E_NUMBER_MAX_LENGTH_${e}`,details:{maxLength:e}})}),de=e=>{const t=Object.keys(e),r=Math.max(0,t.length-3),o=t.map(S=>`${S}: ${e[S].displayString}`).slice(0,3).join(", ");return t.length>0?`ObjectSchema({ ${o}${r>0?`, + ${r} more`:""} })`:"ObjectSchema({})"},v=(e,a)=>{const t=Object.keys(a);return Object.keys(e).every(r=>t.includes(r))},M=(e,a)=>Object.keys(e)<Object.keys(a),le={failOnAdditionalProperties:!0},L=(e,a)=>{const t={...le,...a};return d({is:r=>!E(r)||!v(e,r)||t.failOnAdditionalProperties&&M(e,r)?!1:Object.keys(e).every(o=>e[o].is(r[o])),err:(r,o)=>E(r)?v(e,r)?t.failOnAdditionalProperties&&M(e,r)?n({code:"E_OBJECT_ADDITIONAL_KEYS"})(r,o):n({code:"E_OBJECT_PROPERTY",details:{properties:h(e).reduce((S,m)=>(S[m]=e[m].validate(r[m]),S),{})}})(r,o):n({code:"E_OBJECT_MISSING_KEYS"})(r,o):n({code:"E_OBJECT"})(r,o)})},Se=(e,a)=>c({uri:"ObjectSchema",displayString:de(e),create:t=>t,validation:L(e,a)}),P=e=>d({is:a=>E(a)&&Object.values(a).every(e.is),err:(a,t)=>E(a)?n({code:"E_RECORD_PROPERTY",details:{properties:h(a).reduce((r,o)=>(r[o]=e.validate(a[o]),r),{})}})(a,t):n({code:"E_RECORD"})(a,t)}),me=e=>c({uri:"RecordSchema",displayString:`RecordSchema( ${e.displayString} )`,create:a=>a,validation:P(e)}),he=e=>s(l)({is:a=>a.length>=e,err:n({code:`E_STRING_MIN_LENGTH_${e}`,details:{minLength:e}})}),ue=e=>s(l)({is:a=>a.length<=e,err:n({code:`E_STRING_MAX_LENGTH_${e}`,details:{maxLength:e}})}),Ee=e=>s(l)({is:a=>e.test(a),err:n({code:"E_STRING_MATCHES",details:{regex:e}})}),I={caseSensitive:!1},ye=(e,a={})=>{const t={...I,...a};return s(l)({is:r=>t.caseSensitive?r.toLowerCase().startsWith(e.toLowerCase()):r.startsWith(e),err:n({code:"E_STRING_STARTS_WITH",details:{substring:e}})})},_e=(e,a={})=>{const t={...I,...a};return s(l)({is:r=>t.caseSensitive?r.toLowerCase().endsWith(e.toLowerCase()):r.endsWith(e),err:n({code:"E_STRING_ENDS_WITH",details:{substring:e}})})},fe=(e,a={})=>{const t={...I,...a};return s(l)({is:r=>t.caseSensitive?r.toLowerCase().includes(e.toLowerCase()):r.includes(e),err:n({code:"E_STRING_INCLUDES",details:{substring:e}})})},C=e=>d({is:a=>Array.isArray(a)&&e.every((t,r)=>t.is(a[r])),err:(a,t)=>Array.isArray(a)?n({code:"E_TUPLE_ITEM",details:{items:e.map((r,o)=>r.validate(a[o]))}})(a,t):n({code:"E_TUPLE"})(a,t)}),Ie=(...e)=>c({uri:"TupleSchema",displayString:`TupleSchema( [ ${e.map(a=>a.displayString).join(", ")} ] )`,create:a=>a,validation:C(e)}),w=s(u)({is:e=>Number.isInteger(e)&&e>=0,err:n({code:"E_UINT"})}),Te=c({uri:"UIntSchema",create:e=>e,validation:w}),B=d({is:e=>e===void 0,err:n({code:"E_UNDEFINED"})}),De=c({uri:"UndefinedSchema",create:e=>e,validation:B}),Ne=e=>`UnionSchema( ${e.map(a=>a.displayString).join(" | ")} )`,G=e=>d({is:a=>e.some(t=>t.is(a)),err:n({code:"E_UNION"})}),Oe=e=>{if(e.length<=1)throw new Error("a UnionSchemas list argument must have a length of at least 2");return c({uri:"UnionSchema",displayString:Ne(e),create:a=>a,validation:G(e)})},ge=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,W=s(l)({is:e=>ge.test(e),err:n({code:"E_UUID"})}),Ae=c({uri:"UuidSchema",create:e=>e,validation:W});i.ArraySchema=Z,i.ArrayValidation=g,i.BooleanSchema=F,i.BooleanValidation=A,i.DateSchema=X,i.DateValidation=b,i.EmailSchema=Q,i.EmailValidation=V,i.IntSchema=x,i.IntValidation=R,i.Iso8601DateSchema=ae,i.Iso8601DateTimeSchema=re,i.Iso8601DateTimeValidation=$,i.Iso8601DateValidation=_,i.Iso8601TimeSchema=te,i.Iso8601TimeValidation=f,i.LiteralSchema=ne,i.LiteralValidation=j,i.NullSchema=oe,i.NullValidation=U,i.NumberMax=se,i.NumberMin=ce,i.NumberSchema=p,i.NumberValidation=u,i.ObjectSchema=Se,i.ObjectValidation=L,i.RecordSchema=me,i.RecordValidation=P,i.StringEndsWith=_e,i.StringIncludes=fe,i.StringMatches=Ee,i.StringMaxLength=ue,i.StringMinLength=he,i.StringSchema=q,i.StringStartsWith=ye,i.StringValidation=l,i.TupleSchema=Ie,i.TupleValidation=C,i.UIntSchema=Te,i.UIntValidation=w,i.UndefinedSchema=De,i.UndefinedValidation=B,i.UnionSchema=Oe,i.UnionValidation=G,i.UuidSchema=Ae,i.UuidValidation=W,i.createError=n,i.err=T,i.extendValidation=s,i.inputToDisplayString=y,i.isErr=N,i.isObject=E,i.isOk=O,i.matchEither=H,i.matchObjectProperties=Y,i.objectKeys=h,i.ok=D,i.schema=c,i.unwrapEither=k,i.validation=d,i.withValidations=J,Object.defineProperties(i,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
