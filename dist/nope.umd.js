(function(r,m){typeof exports=="object"&&typeof module<"u"?m(exports):typeof define=="function"&&define.amd?define(["exports"],m):(r=typeof globalThis<"u"?globalThis:r||self,m(r.Nope={}))})(this,function(r){"use strict";const m=e=>Object.keys(e),S=e=>typeof e=="object"&&!Array.isArray(e)&&e!==null&&!(e instanceof Date),K={maxArrayDisplayProperties:3,maxObjectDisplayProperties:3},u=(e,a)=>{const i={...K,...a};switch(typeof e){case"string":return`'${e}'`;case"number":case"boolean":return e.toString();case"object":{if(e===null)return"null";if(e instanceof Date)return"Date";if(Array.isArray(e)){const l=Math.max(0,e.length-i.maxArrayDisplayProperties),oe=e.slice(0,i.maxArrayDisplayProperties).map(se=>u(se,i)).join(", ");return e.length>0?`[ ${oe}${l>0?`, + ${l} more`:""} ]`:"[]"}const t=Object.keys(e),n=Math.max(0,t.length-i.maxObjectDisplayProperties),d=t.slice(0,i.maxObjectDisplayProperties).map(l=>`${l}: ${u(e[l],i)}`).join(", ");return t.length>0?`{ ${d}${n>0?`, + ${n} more`:""} }`:"{}"}case"undefined":return"undefined";default:return"unknown"}},E=e=>({status:"ERR",value:e}),O=e=>({status:"OK",value:e}),b=e=>e.status==="ERR",g=e=>e.status==="OK",M=e=>{if(b(e))throw new Error("Cannot not unwrap either");return e.value},k=(e,{onOk:a,onErr:i})=>g(e)?a(e.value):i(e.value),w=(e,{onOk:a,onErr:i})=>({eitherObject:e,onOk:a,onErr:i}),c=({code:e,message:a,details:i})=>(t,n)=>({code:e,message:a||`input: ${u(t)}, does not match the type of: '${n.displayString}'`,details:i?{...n,...i}:n}),s=e=>e,h=e=>a=>({is:i=>e.is(i)&&a.is(i),err:(i,t)=>e.is(i)?a.err(i,t):e.err(i,t)}),Y=(e,a)=>o({uri:e.uri,create:e.create,validation:s({is:i=>e.is(i)&&a.every(t=>t.is(i)),err:(i,t)=>{if(!e.is(i))return e.err(i,t);const n=a.find(d=>!d.is(i));return n==null?void 0:n.err(i,t)}})}),o=({uri:e,displayString:a=e,create:i,validation:t})=>{const n=d=>t.is(d)?O(i(d)):E(t.err(d,{uri:e,displayString:a}));return{uri:e,displayString:a,is:t.is,create:i,err:t.err,validate:n}},A=e=>s({is:a=>Array.isArray(a)&&a.every(e.is),err:(a,i)=>Array.isArray(a)?c({code:"E_ARRAY_ITEM",details:{items:a.map(e.validate)}})(a,i):c({code:"E_ARRAY"})(a,i)}),B=e=>o({uri:"ArraySchema",displayString:`ArraySchema( ${e.displayString} )`,create:a=>a,validation:A(e)}),j=s({is:e=>e instanceof Date&&e.toString()!=="Invalid Date",err:c({code:"E_DATE"})}),J=o({uri:"DateSchema",create:e=>e,validation:j}),y=s({is:e=>typeof e=="string",err:c({code:"E_STRING"})}),F=o({uri:"StringSchema",create:e=>String(e),validation:y}),G=/^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/i,D=h(y)({is:e=>G.test(e),err:c({code:"E_EMAIL"})}),q=o({uri:"EmailSchema",create:e=>e,validation:D}),f=s({is:e=>typeof e=="number"&&!Number.isNaN(e),err:c({code:"E_NUMBER"})}),z=o({uri:"NumberSchema",create:e=>Number(e),validation:f}),U=h(f)({is:e=>Number.isInteger(e),err:c({code:"E_INT"})}),H=o({uri:"IntSchema",create:e=>e,validation:U}),V=e=>s({is:a=>a===e,err:c({code:"E_LITERAL",details:{literal:e}})}),Q=e=>o({uri:"LiteralSchema",displayString:`LiteralSchema(${u(e)})`,create:a=>a,validation:V(e)}),_=s({is:e=>e===null,err:c({code:"E_NULL"})}),W=o({uri:"NullSchema",create:e=>e,validation:_}),X=e=>{const i=Object.keys(e),t=Math.max(0,i.length-3),n=i.map(d=>`${d}: ${e[d].uri}`).slice(0,3).join(", ");return i.length>0?`ObjectSchema({ ${n}${t>0?`, + ${t} more`:""} })`:"ObjectSchema({})"},T=(e,a)=>{const i=Object.keys(a);return Object.keys(e).every(t=>i.includes(t))},I=(e,a)=>Object.keys(e)<Object.keys(a),Z={failOnAdditionalProperties:!0},N=(e,a)=>{const i={...Z,...a};return s({is:t=>!S(t)||!T(e,t)||i.failOnAdditionalProperties&&I(e,t)?!1:Object.keys(e).every(n=>e[n].is(t[n])),err:(t,n)=>S(t)?T(e,t)?i.failOnAdditionalProperties&&I(e,t)?c({code:"E_OBJECT_ADDITIONAL_KEYS"})(t,n):c({code:"E_OBJECT_PROPERTY",details:{properties:m(e).reduce((d,l)=>(d[l]=e[l].validate(t[l]),d),{})}})(t,n):c({code:"E_OBJECT_MISSING_KEYS"})(t,n):c({code:"E_OBJECT"})(t,n)})},p=(e,a)=>o({uri:"ObjectSchema",displayString:X(e),create:i=>i,validation:N(e,a)}),R=e=>s({is:a=>S(a)&&Object.values(a).every(e.is),err:(a,i)=>S(a)?c({code:"E_RECORD_PROPERTY",details:{properties:m(a).reduce((t,n)=>(t[n]=e.validate(a[n]),t),{})}})(a,i):c({code:"E_RECORD"})(a,i)}),x=e=>o({uri:"RecordSchema",displayString:`RecordSchema( ${e.displayString} )`,create:a=>a,validation:R(e)}),$=e=>s({is:a=>Array.isArray(a)&&e.every((i,t)=>i.is(a[t])),err:(a,i)=>Array.isArray(a)?c({code:"E_TUPLE_ITEM",details:{items:e.map((t,n)=>t.validate(a[n]))}})(a,i):c({code:"E_TUPLE"})(a,i)}),ee=(...e)=>o({uri:"TupleSchema",displayString:`TupleSchema( [ ${e.map(a=>a.displayString).join(", ")} ] )`,create:a=>a,validation:$(e)}),P=h(f)({is:e=>Number.isInteger(e)&&e>=0,err:c({code:"E_UINT"})}),ae=o({uri:"UIntSchema",create:e=>e,validation:P}),v=s({is:e=>e===void 0,err:c({code:"E_UNDEFINED"})}),ie=o({uri:"UndefinedSchema",create:e=>e,validation:v}),re=e=>`UnionSchema( ${e.map(a=>a.displayString).join(" | ")} )`,L=e=>s({is:a=>e.some(i=>i.is(a)),err:c({code:"E_UNION"})}),te=e=>{if(e.length<=1)throw new Error("a UnionSchemas list argument must have a length of at least 2");return o({uri:"UnionSchema",displayString:re(e),create:a=>a,validation:L(e)})},ne=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,C=h(y)({is:e=>ne.test(e),err:c({code:"E_UUID"})}),ce=o({uri:"UuidSchema",create:e=>e,validation:C});r.ArraySchema=B,r.ArrayValidation=A,r.DateSchema=J,r.DateValidation=j,r.EmailSchema=q,r.EmailValidation=D,r.IntSchema=H,r.IntValidation=U,r.LiteralSchema=Q,r.LiteralValidation=V,r.NullSchema=W,r.NullValidation=_,r.NumberSchema=z,r.NumberValidation=f,r.ObjectSchema=p,r.ObjectValidation=N,r.RecordSchema=x,r.RecordValidation=R,r.StringSchema=F,r.StringValidation=y,r.TupleSchema=ee,r.TupleValidation=$,r.UIntSchema=ae,r.UIntValidation=P,r.UndefinedSchema=ie,r.UndefinedValidation=v,r.UnionSchema=te,r.UnionValidation=L,r.UuidSchema=ce,r.UuidValidation=C,r.createError=c,r.err=E,r.extendValidation=h,r.inputToDisplayString=u,r.isErr=b,r.isObject=S,r.isOk=g,r.matchEither=k,r.matchObjectProperties=w,r.objectKeys=m,r.ok=O,r.schema=o,r.unwrapEither=M,r.validation=s,r.withValidations=Y,Object.defineProperties(r,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
