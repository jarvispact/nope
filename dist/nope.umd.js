(function(t,h){typeof exports=="object"&&typeof module<"u"?h(exports):typeof define=="function"&&define.amd?define(["exports"],h):(t=typeof globalThis<"u"?globalThis:t||self,h(t.Nope={}))})(this,function(t){"use strict";const h=e=>Object.keys(e),u=e=>typeof e=="object"&&!Array.isArray(e)&&e!==null&&!(e instanceof Date),k={maxArrayDisplayProperties:3,maxObjectDisplayProperties:3},E=(e,a)=>{const i={...k,...a};switch(typeof e){case"string":return`'${e}'`;case"number":case"boolean":return e.toString();case"object":{if(e===null)return"null";if(e instanceof Date)return"Date";if(Array.isArray(e)){const S=Math.max(0,e.length-i.maxArrayDisplayProperties),ge=e.slice(0,i.maxArrayDisplayProperties).map(Ie=>E(Ie,i)).join(", ");return e.length>0?`[ ${ge}${S>0?`, + ${S} more`:""} ]`:"[]"}const n=Object.keys(e),o=Math.max(0,n.length-i.maxObjectDisplayProperties),d=n.slice(0,i.maxObjectDisplayProperties).map(S=>`${S}: ${E(e[S],i)}`).join(", ");return n.length>0?`{ ${d}${o>0?`, + ${o} more`:""} }`:"{}"}case"undefined":return"undefined";default:return"unknown"}},g=e=>({status:"ERR",value:e}),I=e=>({status:"OK",value:e}),O=e=>e.status==="ERR",T=e=>e.status==="OK",G=e=>{if(O(e))throw new Error("Cannot not unwrap either");return e.value},Y=(e,{onOk:a,onErr:i})=>T(e)?a(e.value):i(e.value),J=(e,{onOk:a,onErr:i})=>({eitherObject:e,onOk:a,onErr:i}),r=({code:e,message:a,details:i})=>(n,o)=>({code:e,message:a||`input: ${E(n)}, does not match the type of: '${o.displayString}'`,details:i?{...o,...i}:o}),s=e=>e,l=e=>a=>({is:i=>e.is(i)&&a.is(i),err:(i,n)=>e.is(i)?a.err(i,n):e.err(i,n)}),Z=(e,a)=>c({uri:e.uri,create:e.create,validation:s({is:i=>e.is(i)&&a.every(n=>n.is(i)),err:(i,n)=>{if(!e.is(i))return e.err(i,n);const o=a.find(d=>!d.is(i));return o==null?void 0:o.err(i,n)}})}),c=({uri:e,displayString:a=e,create:i,validation:n})=>{const o=d=>n.is(d)?I(i(d)):g(n.err(d,{uri:e,displayString:a}));return{uri:e,displayString:a,is:n.is,create:i,err:n.err,validate:o}},D=e=>s({is:a=>Array.isArray(a)&&a.every(e.is),err:(a,i)=>Array.isArray(a)?r({code:"E_ARRAY_ITEM",details:{items:a.map(e.validate)}})(a,i):r({code:"E_ARRAY"})(a,i)}),F=e=>c({uri:"ArraySchema",displayString:`ArraySchema( ${e.displayString} )`,create:a=>a,validation:D(e)}),b=s({is:e=>typeof e=="boolean",err:r({code:"E_BOOLEAN"})}),H=c({uri:"BooleanSchema",create:e=>e,validation:b}),A=s({is:e=>e instanceof Date&&e.toString()!=="Invalid Date",err:r({code:"E_DATE"})}),W=c({uri:"DateSchema",create:e=>e,validation:A}),m=s({is:e=>typeof e=="string",err:r({code:"E_STRING"})}),X=c({uri:"StringSchema",create:e=>String(e),validation:m}),q=/^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/i,V=l(m)({is:e=>q.test(e),err:r({code:"E_EMAIL"})}),z=c({uri:"EmailSchema",create:e=>e,validation:V}),y=s({is:e=>typeof e=="number"&&!Number.isNaN(e),err:r({code:"E_NUMBER"})}),Q=c({uri:"NumberSchema",create:e=>Number(e),validation:y}),N=l(y)({is:e=>Number.isInteger(e),err:r({code:"E_INT"})}),p=c({uri:"IntSchema",create:e=>e,validation:N}),x=/^\d{4}-\d{2}-\d{2}$/,f=l(m)({is:e=>x.test(e)&&new Date(e).toString()!=="Invalid Date",err:r({code:"E_ISO_8601_DATE"})}),ee=c({uri:"Iso8601DateSchema",create:e=>e,validation:f}),ae=/^\d{2}:\d{2}($|:\d{2}$|:\d{2}.\d{3}$)$/,_=l(m)({is:e=>ae.test(e)&&new Date(`2000-01-01T${e}Z`).toString()!=="Invalid Date",err:r({code:"E_ISO_8601_TIME"})});c({uri:"Iso8601TimeSchema",create:e=>e,validation:_});const j=l(m)({is:e=>{const[a,i]=e.split("T");if(!a||!i)return!1;if(i.endsWith("Z")){const[n]=i.split("Z");return f.is(a)&&_.is(n)}return f.is(a)&&_.is(i)},err:r({code:"E_ISO_8601_DATE_TIME"})}),ie=c({uri:"Iso8601DateTimeSchema",create:e=>e,validation:j}),R=e=>s({is:a=>a===e,err:r({code:"E_LITERAL",details:{literal:e}})}),te=e=>c({uri:"LiteralSchema",displayString:`LiteralSchema(${E(e)})`,create:a=>a,validation:R(e)}),$=s({is:e=>e===null,err:r({code:"E_NULL"})}),ne=c({uri:"NullSchema",create:e=>e,validation:$}),re=e=>{const i=Object.keys(e),n=Math.max(0,i.length-3),o=i.map(d=>`${d}: ${e[d].uri}`).slice(0,3).join(", ");return i.length>0?`ObjectSchema({ ${o}${n>0?`, + ${n} more`:""} })`:"ObjectSchema({})"},U=(e,a)=>{const i=Object.keys(a);return Object.keys(e).every(n=>i.includes(n))},v=(e,a)=>Object.keys(e)<Object.keys(a),oe={failOnAdditionalProperties:!0},P=(e,a)=>{const i={...oe,...a};return s({is:n=>!u(n)||!U(e,n)||i.failOnAdditionalProperties&&v(e,n)?!1:Object.keys(e).every(o=>e[o].is(n[o])),err:(n,o)=>u(n)?U(e,n)?i.failOnAdditionalProperties&&v(e,n)?r({code:"E_OBJECT_ADDITIONAL_KEYS"})(n,o):r({code:"E_OBJECT_PROPERTY",details:{properties:h(e).reduce((d,S)=>(d[S]=e[S].validate(n[S]),d),{})}})(n,o):r({code:"E_OBJECT_MISSING_KEYS"})(n,o):r({code:"E_OBJECT"})(n,o)})},ce=(e,a)=>c({uri:"ObjectSchema",displayString:re(e),create:i=>i,validation:P(e,a)}),M=e=>s({is:a=>u(a)&&Object.values(a).every(e.is),err:(a,i)=>u(a)?r({code:"E_RECORD_PROPERTY",details:{properties:h(a).reduce((n,o)=>(n[o]=e.validate(a[o]),n),{})}})(a,i):r({code:"E_RECORD"})(a,i)}),se=e=>c({uri:"RecordSchema",displayString:`RecordSchema( ${e.displayString} )`,create:a=>a,validation:M(e)}),de=e=>l(m)({is:a=>a.length>=e,err:r({code:`E_STRING_MIN_LENGTH_${e}`,details:{minLength:e}})}),le=e=>l(m)({is:a=>a.length<=e,err:r({code:`E_STRING_MAX_LENGTH_${e}`,details:{maxLength:e}})}),me=e=>l(m)({is:a=>e.test(a),err:r({code:"E_STRING_MATCHES",details:{regex:e}})}),L=e=>s({is:a=>Array.isArray(a)&&e.every((i,n)=>i.is(a[n])),err:(a,i)=>Array.isArray(a)?r({code:"E_TUPLE_ITEM",details:{items:e.map((n,o)=>n.validate(a[o]))}})(a,i):r({code:"E_TUPLE"})(a,i)}),Se=(...e)=>c({uri:"TupleSchema",displayString:`TupleSchema( [ ${e.map(a=>a.displayString).join(", ")} ] )`,create:a=>a,validation:L(e)}),B=l(y)({is:e=>Number.isInteger(e)&&e>=0,err:r({code:"E_UINT"})}),he=c({uri:"UIntSchema",create:e=>e,validation:B}),C=s({is:e=>e===void 0,err:r({code:"E_UNDEFINED"})}),ue=c({uri:"UndefinedSchema",create:e=>e,validation:C}),Ee=e=>`UnionSchema( ${e.map(a=>a.displayString).join(" | ")} )`,w=e=>s({is:a=>e.some(i=>i.is(a)),err:r({code:"E_UNION"})}),ye=e=>{if(e.length<=1)throw new Error("a UnionSchemas list argument must have a length of at least 2");return c({uri:"UnionSchema",displayString:Ee(e),create:a=>a,validation:w(e)})},fe=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,K=l(m)({is:e=>fe.test(e),err:r({code:"E_UUID"})}),_e=c({uri:"UuidSchema",create:e=>e,validation:K});t.ArraySchema=F,t.ArrayValidation=D,t.BooleanSchema=H,t.BooleanValidation=b,t.DateSchema=W,t.DateValidation=A,t.EmailSchema=z,t.EmailValidation=V,t.IntSchema=p,t.IntValidation=N,t.Iso8601DateSchema=ee,t.Iso8601DateTimeSchema=ie,t.Iso8601DateTimeValidation=j,t.Iso8601DateValidation=f,t.LiteralSchema=te,t.LiteralValidation=R,t.NullSchema=ne,t.NullValidation=$,t.NumberSchema=Q,t.NumberValidation=y,t.ObjectSchema=ce,t.ObjectValidation=P,t.RecordSchema=se,t.RecordValidation=M,t.StringMatches=me,t.StringMaxLength=le,t.StringMinLength=de,t.StringSchema=X,t.StringValidation=m,t.TupleSchema=Se,t.TupleValidation=L,t.UIntSchema=he,t.UIntValidation=B,t.UndefinedSchema=ue,t.UndefinedValidation=C,t.UnionSchema=ye,t.UnionValidation=w,t.UuidSchema=_e,t.UuidValidation=K,t.createError=r,t.err=g,t.extendValidation=l,t.inputToDisplayString=E,t.isErr=O,t.isObject=u,t.isOk=T,t.matchEither=Y,t.matchObjectProperties=J,t.objectKeys=h,t.ok=I,t.schema=c,t.unwrapEither=G,t.validation=s,t.withValidations=Z,Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
